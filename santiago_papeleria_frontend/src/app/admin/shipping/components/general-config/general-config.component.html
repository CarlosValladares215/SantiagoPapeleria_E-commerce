<div
    class="bg-white rounded-2xl shadow-sm border border-slate-200 p-6 md:p-8 space-y-8 animate-in zoom-in-95 duration-300">
    <div class="flex items-center justify-between pb-6 border-b border-slate-100">
        <div class="flex items-center gap-3">
            <div class="p-2 bg-blue-50 rounded-lg text-blue-600">
                <lucide-icon name="globe" class="w-6 h-6"></lucide-icon>
            </div>
            <h2 class="text-xl font-bold text-slate-800">Reglas Globales</h2>
        </div>
        <button (click)="save()" [disabled]="state.isSaving()"
            class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-xl font-medium transition-all shadow-lg shadow-blue-200 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed">
            <lucide-icon name="save" class="w-4 h-4"></lucide-icon>
            {{ state.isSaving() ? 'Guardando...' : 'Guardar Cambios' }}
        </button>
    </div>

    <div class="grid md:grid-cols-2 gap-8">
        <div>
            <label class="block text-xs font-bold text-slate-400 uppercase tracking-wider mb-2">Impuesto
                (IVA)</label>
            <div class="relative">
                <input type="number" min="0" max="100" [ngModel]="ivaPercentage()" (ngModelChange)="updateIva($event)"
                    (keydown)="preventSymbols($event)"
                    oninput="if(this.value.length > 3) this.value = this.value.slice(0,3); if(Number(this.value) > 100) this.value = '100';"
                    class="w-full pl-4 pr-10 py-3 bg-slate-50 border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-100 focus:border-blue-500 outline-none font-mono text-slate-700">
                <span class="absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 font-bold">%</span>
            </div>
            <p class="text-xs text-slate-400 mt-2">Ingrese el valor entero (ej: 15)</p>
        </div>

        <div>
            <label class="block text-xs font-bold text-green-500 uppercase tracking-wider mb-2">Env√≠o Gratis
                Desde</label>
            <div class="relative">
                <span class="absolute left-4 top-1/2 -translate-y-1/2 text-slate-400">$</span>
                <input type="number" min="0" max="99999" [ngModel]="state.config().freeShippingThreshold"
                    (ngModelChange)="updateField('freeShippingThreshold', $event)" (keydown)="preventSymbols($event)"
                    oninput="if(this.value.length > 5) this.value = this.value.slice(0,5)"
                    class="w-full pl-8 pr-4 py-3 bg-slate-50 border-slate-200 rounded-xl focus:ring-2 focus:ring-green-100 focus:border-green-500 outline-none font-mono text-slate-700">
            </div>
            <p class="text-xs text-slate-400 mt-2">0 para desactivar</p>
        </div>

        <div>
            <label class="block text-xs font-bold text-slate-400 uppercase tracking-wider mb-2">Tarifa Base
                (Global)</label>
            <div class="relative">
                <span class="absolute left-4 top-1/2 -translate-y-1/2 text-slate-400">$</span>
                <input type="number" min="0" max="999" [ngModel]="state.config().baseRate"
                    (ngModelChange)="updateField('baseRate', $event)" (keydown)="preventSymbols($event)"
                    oninput="if(this.value.length > 4) this.value = this.value.slice(0,4)"
                    class="w-full pl-8 pr-4 py-3 bg-slate-50 border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-100 focus:border-blue-500 outline-none font-mono text-slate-700">
            </div>
        </div>
        <div>
            <label class="block text-xs font-bold text-slate-400 uppercase tracking-wider mb-2">Tarifa por
                Kg (Global)</label>
            <div class="relative">
                <span class="absolute left-4 top-1/2 -translate-y-1/2 text-slate-400">$</span>
                <input type="number" min="0" max="999" [ngModel]="state.config().ratePerKg"
                    (ngModelChange)="updateField('ratePerKg', $event)" (keydown)="preventSymbols($event)"
                    oninput="if(this.value.length > 4) this.value = this.value.slice(0,4)"
                    class="w-full pl-8 pr-4 py-3 bg-slate-50 border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-100 focus:border-blue-500 outline-none font-mono text-slate-700">
            </div>
        </div>
    </div>
</div>