<div class="email-container">
    <!-- Header -->
    <div class="header" [ngClass]="{'header-error': type === 'error', 'header-default': type !== 'error'}">
        <h1 *ngIf="type === 'success'">‚úÖ Sincronizaci√≥n Exitosa</h1>
        <h1 *ngIf="type === 'warning'">üîÑ Alerta de Sincronizaci√≥n ERP</h1>
        <h1 *ngIf="type === 'error'">‚ùå Error de Sincronizaci√≥n</h1>
    </div>

    <!-- Content -->
    <div class="content">

        <!-- Icons -->
        <div class="icon-container" *ngIf="type === 'success'">
            <div class="success-icon-circle">‚úì</div>
        </div>
        <div class="icon-container" *ngIf="type === 'error'">
            <div class="error-icon-circle">‚úï</div>
        </div>


        <!-- Alert Box -->
        <div class="alert-box" [ngClass]="{
      'success': type === 'success',
      'warning': type === 'warning'
    }">
            <h2 class="alert-title" *ngIf="type === 'success'">Sincronizaci√≥n completada exitosamente</h2>
            <h2 class="alert-title" *ngIf="type === 'warning'">‚ö†Ô∏è Sincronizaci√≥n completada con errores</h2>
            <h2 class="alert-title" *ngIf="type === 'error'">La sincronizaci√≥n ha fallado</h2>

            <p class="alert-message">
                {{ data?.alertMessage || 'Mensaje de alerta por defecto...' }}
            </p>
        </div>

        <!-- Sync Information -->
        <div class="info-grid">
            <div class="info-row">
                <div class="info-label">Tipo de Sincronizaci√≥n:</div>
                <div class="info-value">{{ data?.syncType }}</div>
            </div>
            <div class="info-row">
                <div class="info-label">Fecha y Hora:</div>
                <div class="info-value">{{ data?.date }}</div>
            </div>
            <div class="info-row" *ngIf="data?.duration">
                <div class="info-label">Duraci√≥n:</div>
                <div class="info-value">{{ data?.duration }}</div>
            </div>
            <div class="info-row" *ngIf="data?.attempts">
                <div class="info-label">Intentos realizados:</div>
                <div class="info-value">{{ data?.attempts }}</div>
            </div>
            <div class="info-row">
                <div class="info-label">Estado:</div>
                <div class="info-value">{{ data?.status }}</div>
            </div>
        </div>

        <!-- Statistics (Success/Warning only) -->
        <table class="stats-container" cellpadding="0" cellspacing="10" *ngIf="type !== 'error' && data?.stats">
            <tr>
                <td class="stat-box">
                    <p class="stat-number"
                        [ngClass]="{'green-text': type === 'success', 'blue-text': type !== 'success'}">{{
                        data?.stats?.updated }}</p>
                    <p class="stat-label">Productos Actualizados</p>
                </td>
                <td class="stat-box">
                    <p class="stat-number black-text">{{ data?.stats?.newProduct }}</p>
                    <p class="stat-label">Productos Nuevos</p>
                </td>
                <td class="stat-box">
                    <p class="stat-number black-text">{{ data?.stats?.errors }}</p>
                    <p class="stat-label">Errores</p>
                </td>
            </tr>
        </table>

        <div class="divider"></div>

        <!-- Success Summary -->
        <ng-container *ngIf="type === 'success'">
            <h3 class="section-title">Resumen de Cambios</h3>
            <ul class="summary-list">
                <li>Precios actualizados: {{ data?.stats?.updated }} productos</li>
                <li>Stock actualizado: {{ data?.stats?.updated }} productos</li>
                <li>Informaci√≥n de productos sincronizada</li>
                <li>Sin conflictos detectados</li>
            </ul>
        </ng-container>

        <!-- Error Details Table (Warning) -->
        <ng-container *ngIf="(type === 'warning') && data?.errorList?.length">
            <h3 class="section-title">Detalles de Errores</h3>
            <table class="error-table">
                <thead>
                    <tr>
                        <th>C√≥digo Producto</th>
                        <th>Nombre</th>
                        <th>Error</th>
                        <th>Acci√≥n Tomada</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let error of data?.errorList">
                        <td><span class="error-code">{{ error.code }}</span></td>
                        <td>{{ error.name }}</td>
                        <td>{{ error.error }}</td>
                        <td>{{ error.action }}</td>
                    </tr>
                </tbody>
            </table>
            <div class="divider"></div>
        </ng-container>

        <!-- Critical Error Details (Error Type) -->
        <ng-container *ngIf="type === 'error' && data?.errorDetails">
            <h3 class="section-title">Detalles del Error</h3>
            <div class="error-details" *ngFor="let detail of data?.errorDetails">
                <h4>{{ detail.title }}</h4>
                <p>{{ detail.message }}</p>
                <p *ngIf="detail.url">URL: {{ detail.url }}</p>
                <p>C√≥digo de error: {{ detail.code }}</p>
            </div>

            <h3 class="section-title" style="margin-top: 30px;">Posibles Causas</h3>
            <ul class="summary-list">
                <li>El servidor de DobraNet ERP no est√° disponible</li>
                <li>Problemas de conectividad de red</li>
                <li>Token de autenticaci√≥n expirado o inv√°lido</li>
                <li>Firewall bloqueando la conexi√≥n</li>
            </ul>

            <div class="action-steps">
                <h4>üîß Pasos Recomendados</h4>
                <ol>
                    <li>Verifica el estado del servidor DobraNet ERP</li>
                    <li>Comprueba la configuraci√≥n de la API en el panel de administraci√≥n</li>
                    <li>Revisa que el token de autenticaci√≥n sea v√°lido</li>
                    <li>Intenta ejecutar una sincronizaci√≥n manual</li>
                </ol>
            </div>
        </ng-container>

        <!-- Logs (Warning) -->
        <ng-container *ngIf="(type === 'warning') && data?.logs?.length">
            <h3 class="section-title">Log Detallado</h3>
            <div class="log-section">
                <div *ngFor="let log of data?.logs">
                    [{{ log.time }}]
                    <span [ngClass]="{
            'log-success': log.type === 'success',
            'log-warning': log.type === 'warning',
            'log-error': log.type === 'error'
          }">
                        {{ log.message }}
                    </span>
                </div>
            </div>
        </ng-container>

        <!-- CTA -->
        <div style="text-align: center; margin: 30px 0;">
            <a href="#" class="button" [ngClass]="{'secondary': type === 'error'}">
                {{ type === 'error' ? 'Intentar Sincronizaci√≥n Manual' : 'Ver Detalles Completos en el Panel' }}
            </a>
            <br *ngIf="type === 'error'">
            <a href="#" class="button secondary" *ngIf="type === 'error'"
                style="margin-top: 10px; background-color: #104D73;">
                Revisar Configuraci√≥n
            </a>
        </div>

        <!-- Footer Info -->
        <p class="help-text" *ngIf="data?.nextScheduled">
            <strong>{{ type === 'error' ? 'Pr√≥ximo intento autom√°tico:' : 'Pr√≥xima sincronizaci√≥n programada:'
                }}</strong><br>
            {{ data?.nextScheduled }}
        </p>

    </div>

    <!-- Footer -->
    <div class="footer">
        <p><strong>Tu Tienda E-commerce</strong></p>
        <p>Sistema de Sincronizaci√≥n ERP - DobraNet</p>
        <div class="footer-links">
            <a href="#">Configuraci√≥n</a> |
            <a href="#">Ver Logs</a> |
            <a href="#">Dashboard</a>
        </div>
        <p class="footer-note">
            Este es un mensaje autom√°tico. Por favor no respondas a este email.
        </p>
        <p class="critical-alert" *ngIf="type === 'error'">
            <strong>‚ö†Ô∏è Alerta Cr√≠tica - Requiere Atenci√≥n Inmediata</strong>
        </p>
    </div>
</div>