<div class="bg-white p-6 rounded-lg shadow-lg mb-6">
  <h2 class="text-xl font-bold text-[#104D73] mb-4">Método de Pago</h2>

  <div class="space-y-4">
    <ng-container *ngFor="let method of paymentMethods">
      
      <label 
        class="flex items-center p-4 border-2 rounded-lg cursor-pointer transition-all duration-200"
        [ngClass]="{
          'border-[#F2CB07] ring-2 ring-[#F2CB07] bg-[#F2DF7E]': selectedPaymentMethod === method.id,
          'border-gray-200 hover:border-gray-300': selectedPaymentMethod !== method.id
        }"
        (click)="selectPaymentMethod(method.id)"
      >
        <input
          type="radio"
          name="paymentMethod"
          [value]="method.id"
          [checked]="selectedPaymentMethod === method.id"
          class="sr-only"
        />

        <div class="flex items-center flex-1">
          <div class="w-12 h-12 bg-[#104D73] rounded-full flex items-center justify-center mr-4 flex-shrink-0">
            <i [class]="method.icon" class="text-white text-xl"></i>
          </div>
          
          <div class="flex-1">
            <h3 class="font-semibold text-[#104D73]">{{ method.name }}</h3>
            <p class="text-sm text-gray-600">{{ method.description }}</p>
            
            <div class="flex space-x-2 mt-2 flex-wrap">
              <span 
                *ngFor="let badge of method.badges" 
                class="bg-[#104D73] text-white text-xs px-2 py-1 rounded"
              >
                {{ badge }}
              </span>
            </div>
          </div>
        </div>

        <div class="w-6 h-6 border-2 rounded-full flex items-center justify-center flex-shrink-0 ml-4"
          [ngClass]="{
            'border-[#104D73]': selectedPaymentMethod !== method.id,
            'border-[#104D73] bg-white': selectedPaymentMethod === method.id
          }"
        >
          <div *ngIf="selectedPaymentMethod === method.id" class="w-3 h-3 bg-[#104D73] rounded-full"></div>
        </div>
      </label>

      <ng-container *ngIf="selectedPaymentMethod === 'transfer' && showTransferInstructions">
        <div class="mt-4 p-6 bg-[#F2DF7E] rounded-lg shadow-inner">
          <h3 class="font-bold text-[#012E40] mb-4">
            <i class="ri-bank-line mr-2"></i>
            Instrucciones para Transferencia Bancaria
          </h3>
          
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
            <div class="bg-white p-4 rounded-lg border border-gray-100">
              <h4 class="font-semibold text-[#104D73] mb-2">Banco Pichincha</h4>
              <p class="text-sm text-gray-700">Cuenta Corriente</p>
              <p class="font-mono text-[#104D73] font-bold">2204567890</p>
              <p class="text-sm text-gray-700">Santiago Papelería Cía. Ltda.</p>
            </div>
            <div class="bg-white p-4 rounded-lg border border-gray-100">
              <h4 class="font-semibold text-[#104D73] mb-2">Banco Guayaquil</h4>
              <p class="text-sm text-gray-700">Cuenta Ahorros</p>
              <p class="font-mono text-[#104D73] font-bold">0987654321</p>
              <p class="text-sm text-gray-700">Santiago Papelería Cía. Ltda.</p>
            </div>
          </div>
          
          <div class="bg-white p-4 rounded-lg border border-gray-100">
            <h4 class="font-semibold text-[#104D73] mb-3">
              <i class="ri-upload-cloud-line mr-2"></i>
              Subir Comprobante de Pago (Monto: {{ total | currency: 'USD': 'symbol': '1.2-2' }})
            </h4>
            
            <ng-container *ngIf="!fileName(); else fileUploaded">
              <label for="transfer-file" class="flex items-center justify-center border-2 border-dashed border-[#104D73] rounded-lg p-3 text-[#104D73] text-center cursor-pointer hover:border-[#F2CB07] transition-colors">
                <i class="ri-file-upload-line text-2xl mr-2"></i>
                <span class="text-sm font-medium">Seleccionar archivo (JPG, PNG, PDF)</span>
                <input
                  type="file"
                  id="transfer-file"
                  accept="image/*,.pdf"
                  (change)="handleFileUpload($event)"
                  class="hidden"
                />
              </label>
            </ng-container>
            
            <ng-template #fileUploaded>
              <div class="mt-3 p-3 bg-green-100 rounded-lg flex justify-between items-center border border-green-300">
                <p class="text-green-700 font-medium">
                  <i class="ri-check-line mr-2"></i>
                  Archivo cargado: **{{ fileName() }}**
                </p>
                <button (click)="removeFile()" class="text-red-500 hover:text-red-700 transition-colors" title="Eliminar archivo">
                  <i class="ri-close-circle-line text-xl"></i>
                </button>
              </div>
            </ng-template>

            <p class="text-xs text-gray-600 mt-2">
              Formatos aceptados: JPG, PNG, PDF (máx. 5MB)
            </p>
          </div>
        </div>
      </ng-container>

      <ng-container *ngIf="selectedPaymentMethod === 'contraentrega'">
        <div class="mt-4 p-4 bg-yellow-50 border-l-4 border-[#F2CB07] rounded-r-lg shadow-inner ml-2">
          <div class="flex items-start">
            <i class="ri-error-warning-line text-2xl text-[#012E40] mr-3 mt-1"></i>
            <div>
              <h4 class="font-bold text-[#012E40]">Importante - Pago Contraentrega</h4>
              <p class="text-[#012E40] text-sm">
                Recuerda tener el monto exacto: **{{ total | currency: 'USD': 'symbol': '1.2-2' }}** en efectivo para el courier.
              </p>
            </div>
          </div>
        </div>
      </ng-container>
      
    </ng-container>
  </div>
</div>