<div
    class="bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-100">
    <!-- Image Section -->
    <div class="relative">
        <img [src]="getMainImage()" [alt]="product.name" class="w-full h-48 object-cover object-top" />

        <!-- Discount Badge - Top Left -->
        <div *ngIf="product.discount && product.stock > 0"
            class="absolute top-3 left-3 bg-red-600 text-white px-3 py-1.5 rounded-md text-sm font-bold shadow-lg">
            -{{ product.discount }}%
        </div>

        <!-- New Badge - Top Right -->
        <div *ngIf="product.isNew && product.stock > 0"
            class="absolute top-3 right-3 bg-green-500 text-white px-3 py-1 rounded-full text-sm font-bold">
            NUEVO
        </div>

        <!-- Out of Stock Overlay -->
        <div *ngIf="product.stock === 0" class="absolute inset-0 bg-black/50 flex items-center justify-center">
            <span class="bg-red-600 text-white px-4 py-2 rounded-lg font-bold">
                AGOTADO
            </span>
        </div>
    </div>

    <!-- Product Info -->
    <div class="p-6">
        <div class="text-xs text-gray-500 mb-2">{{ product.category }}</div>

        <h3 class="text-lg font-bold text-[#104D73] mb-3 line-clamp-2 min-h-[3.5rem]">
            {{ product.name }}
        </h3>

        <!-- Price -->
        <div class="mb-4">
            <div class="flex items-baseline gap-2">
                <span *ngIf="product.originalPrice" class="text-lg text-gray-400 line-through">
                    ${{ product.originalPrice.toFixed(2) }}
                </span>
                <span class="text-3xl font-bold text-[#104D73]">
                    ${{ product.price.toFixed(2) }}
                </span>
            </div>
        </div>

        <!-- Stock Status -->
        <div class="mb-4">
            <span
                [class]="'inline-flex items-center gap-1 text-xs px-2 py-1 rounded font-medium whitespace-nowrap ' + getStockStatusClass()">
                <i [class]="getStockIcon()"></i>
                {{ getStockStatusText() }}
            </span>
        </div>

        <!-- Action Buttons -->
        <div class="flex gap-2">
            <button (click)="onViewDetails()"
                class="flex-1 py-2 border border-gray-300 rounded-lg hover:bg-gray-100 transition-colors whitespace-nowrap">
                Ver Detalles
            </button>
            <button (click)="onAddToCart()" [disabled]="product.stock === 0" [class]="'flex-1 py-2 rounded-lg font-medium transition-colors whitespace-nowrap ' +
          (product.stock === 0 
            ? 'bg-gray-300 cursor-not-allowed text-gray-500' 
            : 'bg-[#F2CB07] hover:bg-[#d4b006] text-[#012E40]')">
                {{ product.stock === 0 ? 'Agotado' : 'Agregar' }}
            </button>
        </div>
    </div>
</div>