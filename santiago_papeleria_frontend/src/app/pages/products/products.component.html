<div class="min-h-screen bg-[#F2F2F2]">
    <!-- Notification Toast -->
    <app-notification-toast [message]="notificationMessage()" [show]="showNotification()">
    </app-notification-toast>

    <main class="container mx-auto px-4 md:px-8 lg:px-12 py-8">
        <!-- Breadcrumb -->
        <nav class="mb-8">
            <ol class="flex items-center space-x-2 text-sm text-gray-600">
                <li><a routerLink="/" class="hover:text-[#104D73]">Inicio</a></li>
                <li><i class="ri-arrow-right-s-line"></i></li>
                <li class="text-[#104D73] font-medium">Productos</li>
            </ol>
        </nav>

        <div class="flex flex-col lg:flex-row gap-8">
            <!-- Sidebar Filters -->
            <app-products-filter-sidebar [filters]="filters()" [showFilters]="showFilters()" [categories]="categories()"
                (filterChange)="handleFilterChange($event.key, $event.value)" (clearFilters)="clearFilters()">
            </app-products-filter-sidebar>

            <!-- Main Content -->
            <div class="flex-1">
                <!-- Header Controls -->
                <app-products-header [productCount]="productService.products().length" [currentSort]="filters().sortBy"
                    [showMobileFilters]="showFilters()" (sortChange)="handleFilterChange('sortBy', $event)"
                    (toggleFilters)="toggleFilters()">
                </app-products-header>

                <!-- Products Grid -->
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8" data-product-shop>
                    <app-product-card *ngFor="let product of currentProducts()" [product]="product"
                        (viewDetails)="navigateToProduct($event)" (addToCart)="handleAddToCart($event)">
                    </app-product-card>
                </div>

                <!-- Empty State -->
                <div *ngIf="productService.products().length === 0" class="text-center py-12">
                    <i class="ri-search-line text-4xl text-gray-400 mb-4"></i>
                    <h3 class="text-xl font-semibold text-gray-700 mb-2">No se encontraron productos</h3>
                    <p class="text-gray-500 mb-6">Intenta ajustar tus filtros o b√∫squeda</p>
                    <button (click)="clearFilters()"
                        class="px-6 py-2 bg-[#104D73] text-white rounded-lg hover:bg-[#012E40] transition-colors">
                        Limpiar Filtros
                    </button>
                </div>

                <!-- Pagination -->
                <app-products-pagination *ngIf="productService.products().length > 0" [currentPage]="currentPage()"
                    [totalPages]="totalPages()" (pageChange)="onPageChange($event)">
                </app-products-pagination>
            </div>
        </div>
    </main>
</div>