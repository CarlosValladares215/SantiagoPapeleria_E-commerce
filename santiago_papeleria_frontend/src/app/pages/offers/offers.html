<div class="min-h-screen bg-[#F2F2F2]">
  <!-- Notification Toast -->
  <app-toast-container></app-toast-container>

  <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-10 pb-10">
    <!-- Breadcrumb -->
    <!-- Breadcrumb -->
    <nav class="flex items-center gap-2 mb-6 text-xs text-[#104D73]/80">
      <a routerLink="/" class="hover:text-[#F2CB07] transition-colors">Inicio</a>
      <span class="material-symbols-outlined text-[10px]">chevron_right</span>
      <span class="text-[#104D73] font-bold">Ofertas</span>
    </nav>

    <div class="flex flex-col lg:flex-row gap-8">
      <!-- Sidebar Filters -->
      <app-products-filter-sidebar [filters]="filters()" [showFilters]="showFilters()" [categories]="categories()"
        (filterChange)="handleFilterChange($event.key, $event.value)" (clearFilters)="clearFilters()">
      </app-products-filter-sidebar>

      <!-- Main Content -->
      <div class="flex-1">
        <!-- Header Controls -->
        <app-products-header [productCount]="productService.paginationMeta().total" [currentSort]="filters().sortBy"
          [showMobileFilters]="showFilters()" (sortChange)="handleFilterChange('sortBy', $event)"
          (toggleFilters)="toggleFilters()">
        </app-products-header>

        <!-- Products Grid -->
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8" data-product-shop>
          @for (product of currentProducts(); track product._id || product.sku || $index) {
          <app-product-card [product]="product" (viewDetails)="navigateToProduct($event)"
            (addToCart)="handleAddToCart($event)">
          </app-product-card>
          }
        </div>

        <!-- Empty State -->
        @if (currentProducts().length === 0) {
        <div class="text-center py-12">
          <i class="ri-price-tag-3-line text-4xl text-gray-400 mb-4"></i>
          <h3 class="text-xl font-semibold text-gray-700 mb-2">No se encontraron ofertas</h3>
          <p class="text-gray-500 mb-6">Intenta ajustar tus filtros</p>
          <button (click)="clearFilters()"
            class="px-6 py-2 bg-[#104D73] text-white rounded-lg hover:bg-[#012E40] transition-colors">
            Limpiar Filtros
          </button>
        </div>
        }

        <!-- Pagination -->
        @if (currentProducts().length > 0) {
        <app-products-pagination [currentPage]="currentPage()" [totalPages]="totalPages()"
          (pageChange)="onPageChange($event)">
        </app-products-pagination>
        }
      </div>
    </div>
  </main>
</div>